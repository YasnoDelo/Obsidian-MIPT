
| Command                                  | Description                                            |
| ---------------------------------------- | ------------------------------------------------------ |
| `router ospf 1`                          | инициализируем процесс 1. каждый процесс - одно дерево |
| `router-id 3.3.3.3`                      | Ставим ID на роутере                                   |
| `network 0.0.0.0 255.255.255.255 area 0` | Ставим сети, участвующие в OSPF. Маска wildcart        |
| `sh ip ospf data`                        | Показать всю информацию по OSPF                        |
| `clear ip ospf process`                  | Очистить таблицу маршрутизации                         |


```
++++R2

router ospf 1
network 192.168.23.0 0.0.0.255 area 0
passive-int e2/1

  

++++R3

router ospf 1
network 0.0.0.0 255.255.255.255 area 0
router-id 3.3.3.3

  

++++R4

router ospf 1
network 0.0.0.0 255.255.255.255 area 0
int lo0
ip add 4.4.4.4 255.255.255.255
int lo1
ip add 44.44.44.44 255.255.255.255

  

++++R5

router ospf 1
network 192.168.45.0 0.0.0.255 area 0
```

### NBMA ([ссыль на оригинальную статью](https://wiki.shibaev.info/index.php?title=%D0%9F%D0%BE%D0%BD%D0%B8%D0%BC%D0%B0%D0%BD%D0%B8%D0%B5_%D1%82%D0%B8%D0%BF%D0%BE%D0%B2_%D1%81%D0%B5%D1%82%D0%B5%D0%B9_OSPF#OSPF_.D0.BF.D0.BE.D0.B2.D0.B5.D1.80.D1.85_Frame_Relay))
Для NBMA (Non‑Broadcast Multi‑Access) сетей (например для [[Frame relay]] в multicast) нужна дополнительная настройка

[[OSPF setting|OSPF]] на маршрутизаторах Cisco может работать в различных режимах в сетях NMBA. Выбор режима зависит от топологии NMBA сети. Каждый режим имеет особые требования к конфигурации. В RFC 2328 указано, что в среде NBMA [[OSPF setting|OSPF]] может работать в одном из двух нижеуказанных режимов:

- Nonbroadcast (нешироковещательный): Эмулирует работу OSPF в сетях широковещательного типа. Требует ручного указания соседей. Нуждается в выборах DR и BDR. Как правило, используется в полносвязных топологиях.
- Point-to-multipoint (точка-мультиточка): Воспринимает NBMA- сеть как набор соединений типа точка-точка. В таком режиме маршрутизаторы автоматически обнаруживают соседние маршрутизаторы, но выборов DR и BDR не производят, как это и предписано для сетей типа точка-точка. Такая конфигурация, как правило, используется в полусвязных сетях.

Выбор между nonbroadcast и point-to-multipoint режимами определяет схему работы протокола hello и подходы к распространению топологической информации (flooding work) по нешироковещательной сети. Главное преимущество первого режима заключается в меньшем объеме работы по вводу ручных настроек, в то время, как второй режим берет свое за счет уменьшения количества служебного трафика.

Основным преимуществом point-to-multipoint режима является менее трудоёмкая настройка. А главным преимуществом режима nonbroadcast является меньшие накладные расходы (overhead traffic) по сравнению с point-to-multipoint режимом. Кроме вышеуказанных двух режимов, Cisco позволяет воспользоваться еще тремя:

    Point-to-multipoint nonbroadcast (Нешироковещательный точка-точка)
    Broadcast (широковещательный)
    Point-to-point (точка-точка)

Выбор типа сети протокола [[OSPF setting|OSPF]] в сетях NBMA

Соответствующий тип сети протокола [[OSPF setting|OSPF]] в сетях NBMA указывается с помощью команды `ip ospf network`. Ниже приведен синтаксис данной команды:

`ip ospf network {broadcast | non-broadcast | point-to multipoint | point-to-point}`

### Кароче
На мультикастных интерфейсах нужно прописывать: `ip ospf network point-to multipoint` - перед началом основной настройки [[OSPF setting|OSPF]]

